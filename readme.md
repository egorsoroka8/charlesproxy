# Подмена данных с помощью Charles Proxy.


- Данный гайд написан в учебных целях, для подтверждения навыков в работе с приложением.
- Тестирование было произведено исследовательским методом, для более глубокого тестирования необходима документация.

---

### 1. Подмена статус кода с помощью функции BreakPoint.

С помощью данной функции мы останавливаем запрос к серверу (или ответ от него) и в ручном режиме можем подменить данные.
Манипуляции будем проводим в кабинете пользователя.

**1.1 Первоначально найдем и сфокусируемся на интересующем нас запросе во вкладке Structure.** 

<p align="center">
  <img src="https://user-images.githubusercontent.com/112896404/205890231-bfb91d62-026a-42b8-bb4a-d1a2f2a53397.png">
</p>

**1.2 На телефоне заходим в интересующую нас вкладку, здесь отображена информация о совершенных ранее заказах**

<p align="center">
  <img src="https://user-images.githubusercontent.com/112896404/205906034-ba67baa5-884d-4602-9585-0c386b883c58.png" width="400">
</p>

**1.3 Находим данный запрос во вкладке Structure и копируем URL запроса**

<p align="center">
  <img src="https://user-images.githubusercontent.com/112896404/205899177-aa453cec-3eeb-457a-afc1-28b58c486a66.png">
</p>

**1.4 Переходим в Proxy -> Breakpoint settings. Устанавливаем чекбокс Enable Breakpoints. Нажимаем на кнопку "Add" вставляем скопированный URL в поле Host, парсим значение нажатием на клавишу Tab, устанавливаем чекбокс Response (в данном примере мы будем менять ответ) и нажимаем OK**

<p align="center">
  <img src="https://user-images.githubusercontent.com/112896404/205900727-84ca2aa3-5599-4650-a88b-d45e683681f9.png">
</p>

**1.5 Обновляем страницу заказов на телефоне, наш запрос блокируется и мы можем внести в него изменения. Как мы видим статус ответа у нас 200 OK, мы заменяем его на 404 Not Found и нажимаем на кнопку Execute**


<p align="center">
  <img src="https://user-images.githubusercontent.com/112896404/205902897-5e6c7b53-27c0-41a5-9fc4-046a6da502ff.png">
</p>

<p align="center">
  <img src="https://user-images.githubusercontent.com/112896404/205902980-003c3fc8-6ff8-4555-b093-aab6c48ff786.png">
</p>

**1.6 Проверяем телефон и видим что приложение выдаёт сообщение об ошибке соответствующее 404 Not Found.**

<p align="center">
  <img src="https://user-images.githubusercontent.com/112896404/205906331-9cf7328a-428e-49e2-9724-bad60a1602c3.png" width="400">
</p>

---


### 2. Подмена тела ответа с помощью функции Rewrite.
## * преимущество данного метода в том, что мы можем создать коллекцию запросов и запускать когда нам это понадобится, например при повторном прогоне тестов.

**2.1 На телефоне заходим в интересующую нас вкладку, в данном случае это будет профиль пользователя.</br> У данного профиля золотой статус, подменим его на серебрянный.**

<p align="center">
  <img src="https://user-images.githubusercontent.com/112896404/205989723-ad44659e-ff80-4a5f-a82a-1a62221c251e.png" width="400">
</p>

**2.2 Находим интересующий нас запрос. В теле ответа видим интересующие нас значения levelTitle": "Золотой уровень" и "levelCode": "gold". Выполним подмену только последнего значения.**

<p align="center">
  <img src="https://user-images.githubusercontent.com/112896404/205993838-bbcb5c2f-5e4f-4892-96c1-7609d5910e73.png">
</p>

**2.3 Заходим в Tools -> Rewrite создаем коллекцию, назовем ее Test. В верхней форме вставляем URL и парсим его.**

<p align="center">
  <img src="https://user-images.githubusercontent.com/112896404/205990712-f91f65b4-c0cc-48e9-aa26-3d9a3ce3d7cc.png">
</p>

**2.4 В выпадающим списке Type выбираем значение Body. Устанавливаем значение чекбокса на Response. В значение Value в блоке Match выставляем значение gold, в блоке Replace - silver.**

<p align="center">
  <img src="https://user-images.githubusercontent.com/112896404/205990939-21af2a73-5a64-427d-8835-bfe218c3f290.png">
</p>

**2.5 Перезагружаем приложение и заходим в профиль, интересующая нас информация заменилась. Текстовая информация осталась прежней, эмблема статуса сменилась на серебрянный**

<p align="center">
  <img src="https://user-images.githubusercontent.com/112896404/205992465-d520302d-974a-41c0-802e-d9b6c587f4d0.png" width="400">
</p>
